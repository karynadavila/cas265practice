!function (e) { e.fn.jvmobilemenu = function (t) { function n() { s.removeClass("open"), TweenMax.to(a, settings.slideSpeed / 2, { rotation: 0, ease: Power3.easeOut }), TweenMax.to(settings.mainContent, settings.slideSpeed, { marginLeft: 0, onComplete: function () { settings.mainContent.attr("style", "") } }), "left" === settings.position && TweenMax.to(s, settings.slideSpeed, { marginLeft: o }), TweenMax.to(settings.theMenu, settings.slideSpeed, { opacity: 0 }), settings.theMenu.css({ "overflow-y": "hidden", "-webkit-overflow-scrolling": "inherit", "overflow-scrolling": "inherit" }), e(document).off("touchmove"), e("body").css({ overflow: "inherit" }) } function i() { s.addClass("open"), TweenMax.to(d, settings.slideSpeed / 2, { rotation: 45, ease: Power3.easeOut }), TweenMax.to(l, settings.slideSpeed / 2, { rotation: -45, ease: Power3.easeOut }), TweenMax.to(settings.mainContent, settings.slideSpeed, { marginLeft: theMarginLeft }), "left" === settings.position && TweenMax.to(s, settings.slideSpeed, { marginLeft: theMarginLeft - r }), TweenMax.to(settings.theMenu, settings.slideSpeed, { opacity: 1 }); var t = ".mobile-menu", n = e("body"); n.css({ overflow: "hidden" }), e(document).on("touchmove", function (e) { e.preventDefault() }), n.on("touchstart", t, function (e) { 0 === e.currentTarget.scrollTop ? e.currentTarget.scrollTop = 1 : e.currentTarget.scrollHeight === e.currentTarget.scrollTop + e.currentTarget.offsetHeight && (e.currentTarget.scrollTop -= 1) }), n.on("touchmove", t, function (e) { e.stopPropagation() }), settings.theMenu.css({ "overflow-y": "scroll", "overflow-scrolling": "touch", "-webkit-overflow-scrolling": "touch" }) } settings = e.extend({ mainContent: e(".page"), theMenu: e(".mobile-nav"), slideSpeed: .3, menuWidth: 240, position: "right", push: !0, menuPadding: "20px 20px 60px" }, t), e(this).prepend('<div class="hamburger"><div class="hamburger-inner"><div class="bar bar1 hide"></div><div class="bar bar2 cross"></div><div class="bar bar3 cross hidden"></div><div class="bar bar4 hide"></div></div></div>'), settings.theMenu.css({ width: settings.menuWidth, position: "fixed", top: 0, opacity: 0, height: "100%" }).addClass("mobile-menu").wrapInner('<div class="mobile-menu-inner"></div>'), e(".mobile-menu-inner").css({ width: "auto", padding: settings.menuPadding, display: "block" }); var s = e(".hamburger"), o = parseInt(s.css("margin-left")), r = s.outerWidth(!0) - o, a = e(".bar2,.bar3"), d = e(".bar2"), l = e(".bar3"); "left" === settings.position ? (theMarginLeft = settings.menuWidth, settings.theMenu.add(s).css({ left: 0, right: "auto" })) : "right" === settings.position && (theMarginLeft = -settings.menuWidth, settings.theMenu.add(s).css({ left: "auto", right: 0 })), e(window).resize(function () { n() }), s.on("click", function (t) { return e(this).hasClass("open") ? n() : i(), t.stopPropagation(), !1 }), settings.mainContent.on("click", function () { s.hasClass("open") && n() }) }, e.jvmobilemenu = function (t) { return e("body").jvmobilemenu(t) } }(jQuery);